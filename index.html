<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>tictactoe</title>
    <link rel="stylesheet" href="style.css" type="text/css">

</head>

<body>
    <h1>TIC TAK TOE</h1>
    <div class="butttons">
        <div class="btn_r1 display">
            <button class="size" id="btn1" onclick="procedure('btn1')"></button>
            <button class="size" id="btn2" onclick="procedure('btn2')"></button>
            <button class="size" id="btn3" onclick="procedure('btn3')"></button>
        </div>
        <div class="btn_r2 display">
            <button class="size" id="btn4" onclick="procedure('btn4')"></button>
            <button class="size" id="btn5" onclick="procedure('btn5')"></button>
            <button class="size" id="btn6" onclick="procedure('btn6')"></button>
        </div>
        <div class="btn_r3 display">
            <button class="size" id="btn7" onclick="procedure('btn7')"></button>
            <button class="size" id="btn8" onclick="procedure('btn8')"></button>
            <button class="size" id="btn9" onclick="procedure('btn9')"></button>
        </div>
    </div>
    <p></p>
    <script>

        function procedure(btn) {
            const btn_id = document.getElementById(btn)
            const para = document.querySelector("p")

            if ((check_valid(btn))) {
                let turn_player = turn()
                btn_id.innerHTML = turn_player
                if (check_win(turn_player)) {
                    para.textContent = `${turn_player} wins`
                    new_game()
                }
                if (check_draw()) {

                    para.textContent = "match drawn"
                    new_game()
                }
            }

        }
        function check_valid(btn) {
            const btn_id = document.getElementById(btn)
            if (btn_id.innerHTML === "X" || btn_id.innerHTML === "O") {
                console.log("no");
                return false;
            }
            return true
        }
        function turn() {
            let temp = 0;
            let btn_id
            for (let i = 1; i <= 9; i++) {
                btn_id = document.getElementById(`btn${i}`)

                if (btn_id.innerHTML === "X") {
                    temp = temp + 1;
                }
                else if (btn_id.innerHTML === "O") {
                    temp = temp - 1;
                }
            }


            if (temp === 0) {
                return "X"
            }
            return "O"
        }
        function check_win(move) {
            let btn_id_1;
            let btn_id_2;
            let btn_id_3;
            for (let i = 1; i <= 9;) {
                btn_id_1 = document.getElementById(`btn${i++}`)
                btn_id_2 = document.getElementById(`btn${i++}`)
                btn_id_3 = document.getElementById(`btn${i++}`)

                if (btn_id_1.innerHTML === move && btn_id_2.innerHTML === move && btn_id_3.innerHTML === move) {

                    return true
                }
            }
            for (let i = 1; i <= 9;) {
                btn_id_1 = document.getElementById(`btn${i}`)
                i += 3
                btn_id_2 = document.getElementById(`btn${i}`)
                i += 3
                btn_id_3 = document.getElementById(`btn${i}`)

                if (btn_id_1.innerHTML === move && btn_id_2.innerHTML === move && btn_id_3.innerHTML === move) {

                    return true
                }
                if (i == 9) {
                    break; 2
                }
                i -= 5

            }
            i = 1;
            btn_id_1 = document.getElementById(`btn${i}`)
            i += 4
            btn_id_2 = document.getElementById(`btn${i}`)
            i += 4
            btn_id_3 = document.getElementById(`btn${i++}`)
            if (btn_id_1.innerHTML === move && btn_id_2.innerHTML === move && btn_id_3.innerHTML === move) {

                return true
            }
            i = 3;
            btn_id_1 = document.getElementById(`btn${i}`)
            i += 2
            btn_id_2 = document.getElementById(`btn${i}`)
            i += 2
            btn_id_3 = document.getElementById(`btn${i++}`)
            if (btn_id_1.innerHTML === move && btn_id_2.innerHTML === move && btn_id_3.innerHTML === move) {

                return true
            }
            return false

        }
        function check_draw() {
            let btn_id
            for (let i = 1; i <= 9; i++) {
                btn_id = document.getElementById(`btn${i}`)

                if (btn_id.innerHTML !== "X" && btn_id.innerHTML !== "O") {
                    return false
                }

            }
            return true
        }
        function new_game() {
            for (let i = 1; i <= 9; i++) {
                btn_id = document.getElementById(`btn${i}`)

               btn_id.innerHTML=""

            }
        }

    </script>
</body>

</html